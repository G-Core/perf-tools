<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        (function(){
            const isPerformanceSupportedBrowser = () => {
                return Boolean(window && window.performance && window.performance.getEntriesByType);
            }

            const perfMarkScript = function() {
                if (isPerformanceSupportedBrowser()) {
                    const markName = 'perf-self-script'
                    performance.mark(markName);
                    return () => {
                        performance.mark(`${markName}-end`);
                        performance.measure(markName, markName, `${markName}-end`);
                        return performance.getEntriesByName(markName).pop();
                    }
                }
            };

            window.addEventListener('start-perf-script', () => {
                const perf = perfMarkScript();
                window.addEventListener('end-perf-script', () => {
                    console.log(perf());
                }, false);
            }, false);
        }())
    </script>

    <img width="100" src="http://bogdi.xyz/post/growing-software-engineers/cover_hu5e71d6e8d54f756d1f65bb450c2d81ac_167957_1600x0_resize_q75_box.jpg" alt="">
    <script src="../src/gcdn-perf.js" data-gcdn-backend="/collect-x" data-gcdn-token="123" data-gcdn-prefix="bogdi.xyz, http://localhost"></script>
<!--    <script src="../src/static-gcdn-perf.js"></script>-->
</body>
</html>
